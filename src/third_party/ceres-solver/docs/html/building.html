

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building &amp; Installation &mdash; Ceres Solver</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Ceres Solver" href="index.html"/>
        <link rel="next" title="Tutorial" href="tutorial.html"/>
        <link rel="prev" title="Features" href="features.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Ceres Solver</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Building &amp; Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-the-source-code">Getting the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mac-os-x">Mac OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows">Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#android">Android</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ios">iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customizing-the-build">Customizing the build</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-ceres-with-cmake">Using Ceres with CMake</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="nnls_tutorial.html">Non-linear Least Squares</a></li>
<li class="toctree-l2"><a class="reference internal" href="gradient_tutorial.html">General Unconstrained Minimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="nnls_modeling.html">Modeling Non-linear Least Squares</a></li>
<li class="toctree-l2"><a class="reference internal" href="nnls_solving.html">Solving Non-linear Least Squares</a></li>
<li class="toctree-l2"><a class="reference internal" href="gradient_solver.html">General Unconstrained Minimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faqs.html">FAQS, Tips &amp; Tricks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#building">Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#modeling">Modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#solving">Solving</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="users.html">Users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="users.html#publications">Publications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#setting-up-your-environment">Setting up your Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#submitting-a-change">Submitting a change</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="version_history.html">Version History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id1">1.10.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id2">1.9.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id6">1.8.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id9">1.7.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id13">1.6.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id16">1.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id20">1.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id24">1.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id27">1.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id29">1.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id31">1.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id34">1.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id37">1.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id39">1.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id42">1.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#origins">Origins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Ceres Solver</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="main">
            
  <div class="section" id="building-installation">
<span id="chapter-building"></span><h1>Building &amp; Installation<a class="headerlink" href="#building-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-the-source-code">
<h2>Getting the source code<a class="headerlink" href="#getting-the-source-code" title="Permalink to this headline">¶</a></h2>
<p id="section-source">You can start with the <a class="reference external" href="http://ceres-solver.org/ceres-solver-1.10.0.tar.gz">latest stable release</a> . Or if you want
the latest version, you can clone the git repository</p>
<div class="highlight-bash"><div class="highlight"><pre>git clone https://ceres-solver.googlesource.com/ceres-solver
</pre></div>
</div>
</div>
<div class="section" id="dependencies">
<span id="section-dependencies"></span><h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>Ceres relies on a number of open source libraries, some of which are
optional. For details on customizing the build process, see
<a class="reference internal" href="#section-customizing"><em>Customizing the build</em></a> .</p>
<ul>
<li><p class="first"><a class="reference external" href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen</a>
3.2.1 or later.  <strong>Required</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ceres can also use Eigen as a sparse linear algebra
library. Please see the documentation for <tt class="docutils literal"><span class="pre">-DEIGENSPARSE</span></tt> for`
more details.</p>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://www.cmake.org">CMake</a> 2.8.0 or later.
<strong>Required on all platforms except for Android.</strong></p>
</li>
<li><p class="first"><a class="reference external" href="http://code.google.com/p/google-glog">Google Log</a> 0.3.1 or
later. <strong>Recommended</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Ceres has a minimal replacement of <tt class="docutils literal"><span class="pre">glog</span></tt> called <tt class="docutils literal"><span class="pre">miniglog</span></tt>
that can be enabled with the <tt class="docutils literal"><span class="pre">MINIGLOG</span></tt> build
option. <tt class="docutils literal"><span class="pre">miniglog</span></tt> is needed on Android as <tt class="docutils literal"><span class="pre">glog</span></tt> currently
does not build using the NDK. It can however be used on other
platforms too.</p>
<p class="last"><strong>We do not advise using</strong> <tt class="docutils literal"><span class="pre">miniglog</span></tt> <strong>on platforms other than
Android due to the various performance and functionality
compromises in</strong> <tt class="docutils literal"><span class="pre">miniglog</span></tt>.</p>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://code.google.com/p/gflags">Google Flags</a>. Needed to build
examples and tests.</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.cise.ufl.edu/research/sparse/SuiteSparse/">SuiteSparse</a>. Needed for
solving large sparse linear systems. <strong>Optional; strongly recomended
for large scale bundle adjustment</strong></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.cise.ufl.edu/research/sparse/CXSparse/">CXSparse</a>.
Similar to <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt> but simpler and slower. CXSparse has
no dependencies on <tt class="docutils literal"><span class="pre">LAPACK</span></tt> and <tt class="docutils literal"><span class="pre">BLAS</span></tt>. This makes for a simpler
build process and a smaller binary. <strong>Optional</strong></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.netlib.org/blas/">BLAS</a> and <a class="reference external" href="http://www.netlib.org/lapack/">LAPACK</a> routines are needed by
<tt class="docutils literal"><span class="pre">SuiteSparse</span></tt>, and optionally used by Ceres directly for some
operations.</p>
<p>On <tt class="docutils literal"><span class="pre">UNIX</span></tt> OSes other than Mac OS X we recommend <a class="reference external" href="http://math-atlas.sourceforge.net/">ATLAS</a>, which includes <tt class="docutils literal"><span class="pre">BLAS</span></tt> and
<tt class="docutils literal"><span class="pre">LAPACK</span></tt> routines. It is also possible to use <a class="reference external" href="https://github.com/xianyi/OpenBLAS">OpenBLAS</a> . However, one needs to be
careful to <a class="reference external" href="https://github.com/xianyi/OpenBLAS/wiki/faq#wiki-multi-threaded">turn off the threading</a>
inside <tt class="docutils literal"><span class="pre">OpenBLAS</span></tt> as it conflicts with use of threads in Ceres.</p>
<p>MAC OS X ships with an optimized <tt class="docutils literal"><span class="pre">LAPACK</span></tt> and <tt class="docutils literal"><span class="pre">BLAS</span></tt>
implementation as part of the <tt class="docutils literal"><span class="pre">Accelerate</span></tt> framework. The Ceres
build system will automatically detect and use it.</p>
<p>For Windows things are much more complicated. <a class="reference external" href="http://icl.cs.utk.edu/lapack-for-windows/lapack/">LAPACK For
Windows</a>
has detailed instructions..</p>
<p><strong>Optional but required for</strong> <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="linux">
<span id="section-linux"></span><h2>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h2>
<p>We will use <a class="reference external" href="http://www.ubuntu.com">Ubuntu</a> as our example linux
distribution.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Up to at least Ubuntu 13.10, the SuiteSparse package in the official
package repository (built from SuiteSparse v3.4.0) <strong>cannot</strong> be used
to build Ceres as a <em>shared</em> library.  Thus if you want to build
Ceres as a shared library using SuiteSparse, you must perform a
source install of SuiteSparse.  It is recommended that you use the
current version of SuiteSparse (4.2.1 at the time of writing).</p>
</div>
<p>Start by installing all the dependencies.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># CMake</span>
sudo apt-get install cmake
<span class="c"># gflags</span>
tar -xvzf gflags-2.0.tar.gz
<span class="nb">cd </span>gflags-2.0
./configure --prefix<span class="o">=</span>/usr/local
make
sudo make install.
<span class="c"># google-glog must be configured to use the previously installed gflags</span>
tar -xvzf glog-0.3.2.tar.gz
<span class="nb">cd </span>glog-0.3.2
./configure --with-gflags<span class="o">=</span>/usr/local/
make
sudo make install
<span class="c"># BLAS &amp; LAPACK</span>
sudo apt-get install libatlas-base-dev
<span class="c"># Eigen3</span>
sudo apt-get install libeigen3-dev
<span class="c"># SuiteSparse and CXSparse (optional)</span>
<span class="c"># - If you want to build Ceres as a *static* library (the default)</span>
<span class="c">#   you can use the SuiteSparse package in the main Ubuntu package</span>
<span class="c">#   repository:</span>
sudo apt-get install libsuitesparse-dev
<span class="c"># - However, if you want to build Ceres as a *shared* library, you must</span>
<span class="c">#   perform a source install of SuiteSparse (and uninstall the Ubuntu</span>
<span class="c">#   package if it is currently installed.</span>
</pre></div>
</div>
<p>We are now ready to build, test, and install Ceres.</p>
<div class="highlight-bash"><div class="highlight"><pre>tar zxf ceres-solver-1.10.0.tar.gz
mkdir ceres-bin
<span class="nb">cd </span>ceres-bin
cmake ../ceres-solver-1.10.0
make -j3
make <span class="nb">test</span>
make install
</pre></div>
</div>
<p>You can also try running the command line bundling application with one of the
included problems, which comes from the University of Washington&#8217;s BAL
dataset <a class="reference internal" href="bibliography.html#agarwal" id="id1">[Agarwal]</a>.</p>
<div class="highlight-bash"><div class="highlight"><pre>bin/simple_bundle_adjuster ../ceres-solver-1.10.0/data/problem-16-22106-pre.txt
</pre></div>
</div>
<p>This runs Ceres for a maximum of 10 iterations using the
<tt class="docutils literal"><span class="pre">DENSE_SCHUR</span></tt> linear solver. The output should look something like
this.</p>
<div class="highlight-bash"><div class="highlight"><pre>iter      cost      cost_change  |gradient|   |step|    tr_ratio  tr_radius  ls_iter  iter_time  total_time
   0  4.185660e+06    0.00e+00    1.09e+08   0.00e+00   0.00e+00  1.00e+04       0    7.59e-02    3.37e-01
   1  1.062590e+05    4.08e+06    8.99e+06   5.36e+02   9.82e-01  3.00e+04       1    1.65e-01    5.03e-01
   2  4.992817e+04    5.63e+04    8.32e+06   3.19e+02   6.52e-01  3.09e+04       1    1.45e-01    6.48e-01
   3  1.899774e+04    3.09e+04    1.60e+06   1.24e+02   9.77e-01  9.26e+04       1    1.43e-01    7.92e-01
   4  1.808729e+04    9.10e+02    3.97e+05   6.39e+01   9.51e-01  2.78e+05       1    1.45e-01    9.36e-01
   5  1.803399e+04    5.33e+01    1.48e+04   1.23e+01   9.99e-01  8.33e+05       1    1.45e-01    1.08e+00
   6  1.803390e+04    9.02e-02    6.35e+01   8.00e-01   1.00e+00  2.50e+06       1    1.50e-01    1.23e+00

Ceres Solver v1.10.0 Solve Report
----------------------------------
                                     Original                  Reduced
Parameter blocks                        22122                    22122
Parameters                              66462                    66462
Residual blocks                         83718                    83718
Residual                               167436                   167436

Minimizer                        TRUST_REGION

Dense linear algebra library            EIGEN
Trust region strategy     LEVENBERG_MARQUARDT

                                        Given                     Used
Linear solver                     DENSE_SCHUR              DENSE_SCHUR
Threads                                     1                        1
Linear solver threads                       1                        1
Linear solver ordering              AUTOMATIC                22106, 16

Cost:
Initial                          4.185660e+06
Final                            1.803390e+04
Change                           4.167626e+06

Minimizer iterations                        6
Successful steps                            6
Unsuccessful steps                          0

Time <span class="o">(</span>in seconds<span class="o">)</span>:
Preprocessor                            0.261

  Residual evaluation                   0.082
  Jacobian evaluation                   0.412
  Linear solver                         0.442
Minimizer                               1.051

Postprocessor                           0.002
Total                                   1.357

Termination:                      CONVERGENCE <span class="o">(</span>Function tolerance reached. |cost_change|/cost: 1.769766e-09 &lt;<span class="o">=</span> 1.000000e-06<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="mac-os-x">
<h2>Mac OS X<a class="headerlink" href="#mac-os-x" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ceres will not compile using Xcode 4.5.x (Clang version 4.1) due to a
bug in that version of Clang.  If you are running Xcode 4.5.x, please
update to Xcode &gt;= 4.6.x before attempting to build Ceres.</p>
</div>
<p>On OS X, we recommend using the <a class="reference external" href="http://mxcl.github.com/homebrew/">homebrew</a> package manager to install
Ceres. Assuming that you have the <tt class="docutils literal"><span class="pre">homebrew/science</span></tt> <a class="footnote-reference" href="#f1" id="id2">[1]</a> tap
enabled, then</p>
<div class="highlight-bash"><div class="highlight"><pre>brew install ceres-solver
</pre></div>
</div>
<p>will install the latest stable version along with all the required
dependencies and</p>
<div class="highlight-bash"><div class="highlight"><pre>brew install ceres-solver --HEAD
</pre></div>
</div>
<p>will install the latest version in the git repo.</p>
<p>You can also install each of the dependencies by hand using <a class="reference external" href="http://mxcl.github.com/homebrew/">homebrew</a>. There is no need to install
<tt class="docutils literal"><span class="pre">BLAS</span></tt> or <tt class="docutils literal"><span class="pre">LAPACK</span></tt> separately as OS X ships with optimized
<tt class="docutils literal"><span class="pre">BLAS</span></tt> and <tt class="docutils literal"><span class="pre">LAPACK</span></tt> routines as part of the <a class="reference external" href="https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/vecLib/Reference/reference.html">vecLib</a>
framework.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># CMake</span>
brew install cmake
<span class="c"># google-glog and gflags</span>
brew install glog
<span class="c"># Eigen3</span>
brew install eigen
<span class="c"># SuiteSparse and CXSparse</span>
brew install suite-sparse
</pre></div>
</div>
<p>We are now ready to build, test, and install Ceres.</p>
<div class="highlight-bash"><div class="highlight"><pre>tar zxf ceres-solver-1.10.0.tar.gz
mkdir ceres-bin
<span class="nb">cd </span>ceres-bin
cmake ../ceres-solver-1.10.0
make -j3
make <span class="nb">test</span>
make install
</pre></div>
</div>
<p>Like the Linux build, you should now be able to run
<tt class="docutils literal"><span class="pre">bin/simple_bundle_adjuster</span></tt>.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td><p class="first">Ceres and many of its dependencies are in <a class="reference external" href="https://github.com/Homebrew/homebrew-science">homebrew/science</a> tap. So, if you
don&#8217;t have this tap enabled, then you will need to enable it as
follows before executing any of the commands in this section.</p>
<div class="last highlight-bash"><div class="highlight"><pre>brew tap homebrew/science
</pre></div>
</div>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="windows">
<span id="section-windows"></span><h2>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you find the following <cite>CMake</cite> difficult to set up, then you may
be interested in a <a class="reference external" href="https://github.com/tbennun/ceres-windows">Microsoft Visual Studio wrapper</a> for Ceres Solver by Tal
Ben-Nun.</p>
</div>
<p>On Windows, we support building with Visual Studio 2010 or newer. Note
that the Windows port is less featureful and less tested than the
Linux or Mac OS X versions due to the lack of an officially supported
way of building SuiteSparse and CXSparse.  There are however a number
of unofficial ways of building these libraries. Building on Windows
also a bit more involved since there is no automated way to install
dependencies.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Using <tt class="docutils literal"><span class="pre">google-glog</span></tt> &amp; <tt class="docutils literal"><span class="pre">miniglog</span></tt> with windows.h.</p>
<p>The windows.h header if used with GDI (Graphics Device Interface)
defines <tt class="docutils literal"><span class="pre">ERROR</span></tt>, which conflicts with the definition of <tt class="docutils literal"><span class="pre">ERROR</span></tt>
as a LogSeverity level in <tt class="docutils literal"><span class="pre">google-glog</span></tt> and <tt class="docutils literal"><span class="pre">miniglog</span></tt>.  There
are at least two possible fixes to this problem:</p>
<ol class="last arabic simple">
<li>Use <tt class="docutils literal"><span class="pre">google-glog</span></tt> and define <tt class="docutils literal"><span class="pre">GLOG_NO_ABBREVIATED_SEVERITIES</span></tt>
when building Ceres and your own project, as documented
<a class="reference external" href="http://google-glog.googlecode.com/svn/trunk/doc/glog.html">here</a>.
Note that this fix will not work for <tt class="docutils literal"><span class="pre">miniglog</span></tt>,
but use of <tt class="docutils literal"><span class="pre">miniglog</span></tt> is strongly discouraged on any platform for which
<tt class="docutils literal"><span class="pre">google-glog</span></tt> is available (which includes Windows).</li>
<li>If you do not require GDI, then define <tt class="docutils literal"><span class="pre">NOGDI</span></tt> <strong>before</strong> including
windows.h.  This solution should work for both <tt class="docutils literal"><span class="pre">google-glog</span></tt> and
<tt class="docutils literal"><span class="pre">miniglog</span></tt> and is documented for <tt class="docutils literal"><span class="pre">google-glog</span></tt>
<a class="reference external" href="https://code.google.com/p/google-glog/issues/detail?id=33">here</a>.</li>
</ol>
</div>
<ol class="arabic">
<li><p class="first">Make a toplevel directory for deps &amp; build &amp; src somewhere: <tt class="docutils literal"><span class="pre">ceres/</span></tt></p>
</li>
<li><p class="first">Get dependencies; unpack them as subdirectories in <tt class="docutils literal"><span class="pre">ceres/</span></tt>
(<tt class="docutils literal"><span class="pre">ceres/eigen</span></tt>, <tt class="docutils literal"><span class="pre">ceres/glog</span></tt>, etc)</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">Eigen</span></tt> 3.1 (needed on Windows; 3.0.x will not work). There is
no need to build anything; just unpack the source tarball.</li>
<li><tt class="docutils literal"><span class="pre">google-glog</span></tt> Open up the Visual Studio solution and build it.</li>
<li><tt class="docutils literal"><span class="pre">gflags</span></tt> Open up the Visual Studio solution and build it.</li>
<li>(Experimental) <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt> Previously SuiteSparse was not available
on Windows, recently it has become possible to build it on Windows using
the <a class="reference external" href="https://github.com/jlblancoc/suitesparse-metis-for-windows">suitesparse-metis-for-windows</a>
project.  If you wish to use <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt>, follow their instructions
for obtaining and building it.</li>
<li>(Experimental) <tt class="docutils literal"><span class="pre">CXSparse</span></tt> Previously CXSparse was not available on
Windows, there are now several ports that enable it to be, including:
<a class="reference external" href="https://github.com/PetterS/CXSparse">[1]</a> and
<a class="reference external" href="https://github.com/TheFrenchLeaf/CXSparse">[2]</a>.  If you wish to use
<tt class="docutils literal"><span class="pre">CXSparse</span></tt>, follow their instructions for obtaining and building it.</li>
</ol>
</li>
<li><p class="first">Unpack the Ceres tarball into <tt class="docutils literal"><span class="pre">ceres</span></tt>. For the tarball, you
should get a directory inside <tt class="docutils literal"><span class="pre">ceres</span></tt> similar to
<tt class="docutils literal"><span class="pre">ceres-solver-1.3.0</span></tt>. Alternately, checkout Ceres via <tt class="docutils literal"><span class="pre">git</span></tt> to
get <tt class="docutils literal"><span class="pre">ceres-solver.git</span></tt> inside <tt class="docutils literal"><span class="pre">ceres</span></tt>.</p>
</li>
<li><p class="first">Install <tt class="docutils literal"><span class="pre">CMake</span></tt>,</p>
</li>
<li><p class="first">Make a dir <tt class="docutils literal"><span class="pre">ceres/ceres-bin</span></tt> (for an out-of-tree build)</p>
</li>
<li><p class="first">Run <tt class="docutils literal"><span class="pre">CMake</span></tt>; select the <tt class="docutils literal"><span class="pre">ceres-solver-X.Y.Z</span></tt> or
<tt class="docutils literal"><span class="pre">ceres-solver.git</span></tt> directory for the CMake file. Then select the
<tt class="docutils literal"><span class="pre">ceres-bin</span></tt> for the build dir.</p>
</li>
<li><p class="first">Try running <tt class="docutils literal"><span class="pre">Configure</span></tt>. It won&#8217;t work. It&#8217;ll show a bunch of options.
You&#8217;ll need to set:</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">EIGEN_INCLUDE_DIR_HINTS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">GLOG_INCLUDE_DIR_HINTS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">GLOG_LIBRARY_DIR_HINTS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">GFLAGS_INCLUDE_DIR_HINTS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">GFLAGS_LIBRARY_DIR_HINTS</span></tt></li>
<li>(Optional) <tt class="docutils literal"><span class="pre">SUITESPARSE_INCLUDE_DIR_HINTS</span></tt></li>
<li>(Optional) <tt class="docutils literal"><span class="pre">SUITESPARSE_LIBRARY_DIR_HINTS</span></tt></li>
<li>(Optional) <tt class="docutils literal"><span class="pre">CXSPARSE_INCLUDE_DIR_HINTS</span></tt></li>
<li>(Optional) <tt class="docutils literal"><span class="pre">CXSPARSE_LIBRARY_DIR_HINTS</span></tt></li>
</ol>
<p>to the appropriate directories where you unpacked/built them. If any of
the variables are not visible in the <tt class="docutils literal"><span class="pre">CMake</span></tt> GUI, create a new entry
for them.  We recommend using the <tt class="docutils literal"><span class="pre">&lt;NAME&gt;_(INCLUDE/LIBRARY)_DIR_HINTS</span></tt>
variables rather than setting the <tt class="docutils literal"><span class="pre">&lt;NAME&gt;_INCLUDE_DIR</span></tt> &amp;
<tt class="docutils literal"><span class="pre">&lt;NAME&gt;_LIBRARY</span></tt> variables directly to keep all of the validity
checking, and to avoid having to specify the library files manually.</p>
</li>
<li><p class="first">You may have to tweak some more settings to generate a MSVC
project.  After each adjustment, try pressing Configure &amp; Generate
until it generates successfully.</p>
</li>
<li><p class="first">Open the solution and build it in MSVC</p>
</li>
</ol>
<p>To run the tests, select the <tt class="docutils literal"><span class="pre">RUN_TESTS</span></tt> target and hit <strong>Build
RUN_TESTS</strong> from the build menu.</p>
<p>Like the Linux build, you should now be able to run
<tt class="docutils literal"><span class="pre">bin/simple_bundle_adjuster</span></tt>.</p>
<p>Notes:</p>
<ol class="arabic simple">
<li>The default build is Debug; consider switching it to release mode.</li>
<li>Currently <tt class="docutils literal"><span class="pre">system_test</span></tt> is not working properly.</li>
<li>CMake puts the resulting test binaries in <tt class="docutils literal"><span class="pre">ceres-bin/examples/Debug</span></tt>
by default.</li>
<li>The solvers supported on Windows are <tt class="docutils literal"><span class="pre">DENSE_QR</span></tt>, <tt class="docutils literal"><span class="pre">DENSE_SCHUR</span></tt>,
<tt class="docutils literal"><span class="pre">CGNR</span></tt>, and <tt class="docutils literal"><span class="pre">ITERATIVE_SCHUR</span></tt>.</li>
<li>We&#8217;re looking for someone to work with upstream <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt> to
port their build system to something sane like <tt class="docutils literal"><span class="pre">CMake</span></tt>, and get a
fully supported Windows port.</li>
</ol>
</div>
<div class="section" id="android">
<span id="section-android"></span><h2>Android<a class="headerlink" href="#android" title="Permalink to this headline">¶</a></h2>
<p>Download the <tt class="docutils literal"><span class="pre">Android</span> <span class="pre">NDK</span></tt> version <tt class="docutils literal"><span class="pre">r9d</span></tt> or later. Run
<tt class="docutils literal"><span class="pre">ndk-build</span></tt> from inside the <tt class="docutils literal"><span class="pre">jni</span></tt> directory. Use the
<tt class="docutils literal"><span class="pre">libceres.a</span></tt> that gets created.</p>
</div>
<div class="section" id="ios">
<span id="section-ios"></span><h2>iOS<a class="headerlink" href="#ios" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need iOS version 6.0 or higher to build Ceres Solver.</p>
</div>
<p>To build Ceres for iOS, we need to force <tt class="docutils literal"><span class="pre">CMake</span></tt> to find the toolchains from
the iOS SDK instead of using the standard ones. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre>cmake ../ceres-solver <span class="se">\</span>
-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>../ceres-solver/cmake/iOS.cmake <span class="se">\</span>
-DEIGEN_INCLUDE_DIR<span class="o">=</span>/path/to/eigen/header <span class="se">\</span>
-DIOS_PLATFORM<span class="o">=</span>&lt;PLATFORM&gt;
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">PLATFORM</span></tt> can be one of <tt class="docutils literal"><span class="pre">OS</span></tt>, <tt class="docutils literal"><span class="pre">SIMULATOR</span></tt> and <tt class="docutils literal"><span class="pre">SIMULATOR64</span></tt>. You can
build for <tt class="docutils literal"><span class="pre">OS</span></tt> (<tt class="docutils literal"><span class="pre">armv7</span></tt>, <tt class="docutils literal"><span class="pre">armv7s</span></tt>, <tt class="docutils literal"><span class="pre">arm64</span></tt>), <tt class="docutils literal"><span class="pre">SIMULATOR</span></tt> (<tt class="docutils literal"><span class="pre">i386</span></tt>) or
<tt class="docutils literal"><span class="pre">SIMULATOR64</span></tt> (<tt class="docutils literal"><span class="pre">x86_64</span></tt>) separately and use <tt class="docutils literal"><span class="pre">LIPO</span></tt> to merge them into
one static library.  See <tt class="docutils literal"><span class="pre">cmake/iOS.cmake</span></tt> for more options.</p>
<p>After building, you will get a <tt class="docutils literal"><span class="pre">libceres.a</span></tt> library, which you will need to
add to your Xcode project.</p>
<p>The default CMake configuration builds a bare bones version of Ceres
Solver that only depends on Eigen (<tt class="docutils literal"><span class="pre">MINIGLOG</span></tt> is compiled into Ceres if it is
used), this should be sufficient for solving small to moderate sized problems
(No <tt class="docutils literal"><span class="pre">SPARSE_SCHUR</span></tt>, <tt class="docutils literal"><span class="pre">SPARSE_NORMAL_CHOLESKY</span></tt> linear solvers and no
<tt class="docutils literal"><span class="pre">CLUSTER_JACOBI</span></tt> and <tt class="docutils literal"><span class="pre">CLUSTER_TRIDIAGONAL</span></tt> preconditioners).</p>
<p>If you decide to use <tt class="docutils literal"><span class="pre">LAPACK</span></tt> and <tt class="docutils literal"><span class="pre">BLAS</span></tt>, then you also need to add
<tt class="docutils literal"><span class="pre">Accelerate.framework</span></tt> to your XCode project&#8217;s linking dependency.</p>
</div>
<div class="section" id="customizing-the-build">
<span id="section-customizing"></span><h2>Customizing the build<a class="headerlink" href="#customizing-the-build" title="Permalink to this headline">¶</a></h2>
<p>It is possible to reduce the libraries needed to build Ceres and
customize the build process by setting the appropriate options in
<tt class="docutils literal"><span class="pre">CMake</span></tt>.  These options can either be set in the <tt class="docutils literal"><span class="pre">CMake</span></tt> GUI,
or via <tt class="docutils literal"><span class="pre">-D&lt;OPTION&gt;=&lt;ON/OFF&gt;</span></tt> when running <tt class="docutils literal"><span class="pre">CMake</span></tt> from the
command line.  In general, you should only modify these options from
their defaults if you know what you are doing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you are setting variables via <tt class="docutils literal"><span class="pre">-D&lt;VARIABLE&gt;=&lt;VALUE&gt;</span></tt> when calling
<tt class="docutils literal"><span class="pre">CMake</span></tt>, it is important to understand that this forcibly <strong>overwrites</strong> the
variable <tt class="docutils literal"><span class="pre">&lt;VARIABLE&gt;</span></tt> in the <tt class="docutils literal"><span class="pre">CMake</span></tt> cache at the start of <em>every configure</em>.</p>
<p>This can lead to confusion if you are invoking the <tt class="docutils literal"><span class="pre">CMake</span></tt>
<a class="reference external" href="http://www.gnu.org/software/ncurses/ncurses.html">curses</a> terminal GUI
(via <tt class="docutils literal"><span class="pre">ccmake</span></tt>, e.g. <tt class="docutils literal"><span class="pre">`ccmake</span> <span class="pre">-D&lt;VARIABLE&gt;=&lt;VALUE&gt;</span> <span class="pre">&lt;PATH_TO_SRC&gt;</span></tt>).
In this case, even if you change the value of <tt class="docutils literal"><span class="pre">&lt;VARIABLE&gt;</span></tt> in the <tt class="docutils literal"><span class="pre">CMake</span></tt>
GUI, your changes will be <strong>overwritten</strong> with the value passed via
<tt class="docutils literal"><span class="pre">-D&lt;VARIABLE&gt;=&lt;VALUE&gt;</span></tt> (if one exists) at the start of each configure.</p>
<p class="last">As such, it is generally easier not to pass values to <tt class="docutils literal"><span class="pre">CMake</span></tt> via <tt class="docutils literal"><span class="pre">-D</span></tt>
and instead interactively experiment with their values in the <tt class="docutils literal"><span class="pre">CMake</span></tt> GUI.
If they are not present in the <em>Standard View</em>, toggle to the <em>Advanced View</em>
with <tt class="docutils literal"><span class="pre">&lt;t&gt;</span></tt>.</p>
</div>
<div class="section" id="options-controlling-ceres-configuration">
<h3>Options controlling Ceres configuration<a class="headerlink" href="#options-controlling-ceres-configuration" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first"><tt class="docutils literal"><span class="pre">LAPACK</span> <span class="pre">[Default:</span> <span class="pre">ON]</span></tt>: By default Ceres will use <tt class="docutils literal"><span class="pre">LAPACK</span></tt> (&amp;
<tt class="docutils literal"><span class="pre">BLAS</span></tt>) if they are found.  Turn this <tt class="docutils literal"><span class="pre">OFF</span></tt> to build Ceres
without <tt class="docutils literal"><span class="pre">LAPACK</span></tt>. Turning this <tt class="docutils literal"><span class="pre">OFF</span></tt> also disables
<tt class="docutils literal"><span class="pre">SUITESPARSE</span></tt> as it depends on <tt class="docutils literal"><span class="pre">LAPACK</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">SUITESPARSE</span> <span class="pre">[Default:</span> <span class="pre">ON]</span></tt>: By default, Ceres will link to
<tt class="docutils literal"><span class="pre">SuiteSparse</span></tt> if it and all of its dependencies are present. Turn
this <tt class="docutils literal"><span class="pre">OFF</span></tt> to build Ceres without <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt>. Note that
<tt class="docutils literal"><span class="pre">LAPACK</span></tt> must be <tt class="docutils literal"><span class="pre">ON</span></tt> in order to build with <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">CXSPARSE</span> <span class="pre">[Default:</span> <span class="pre">ON]</span></tt>: By default, Ceres will link to
<tt class="docutils literal"><span class="pre">CXSparse</span></tt> if all its dependencies are present. Turn this <tt class="docutils literal"><span class="pre">OFF</span></tt>
to build Ceres without <tt class="docutils literal"><span class="pre">CXSparse</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">EIGENSPARSE</span> <span class="pre">[Default:</span> <span class="pre">OFF]</span></tt>: By default, Ceres will not use
Eigen&#8217;s sparse Cholesky factorization. The is because this part of
the code is licensed under the <tt class="docutils literal"><span class="pre">LGPL</span></tt> and since <tt class="docutils literal"><span class="pre">Eigen</span></tt> is a
header only library, including this code will result in an <tt class="docutils literal"><span class="pre">LGPL</span></tt>
licensed version of Ceres.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For good performance, use Eigen version 3.2.2 or later.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">GFLAGS</span> <span class="pre">[Default:</span> <span class="pre">ON]</span></tt>: Turn this <tt class="docutils literal"><span class="pre">OFF</span></tt> to build Ceres without
<tt class="docutils literal"><span class="pre">gflags</span></tt>. This will also prevent some of the example code from
building.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">MINIGLOG</span> <span class="pre">[Default:</span> <span class="pre">OFF]</span></tt>: Ceres includes a stripped-down,
minimal implementation of <tt class="docutils literal"><span class="pre">glog</span></tt> which can optionally be used as
a substitute for <tt class="docutils literal"><span class="pre">glog</span></tt>, thus removing <tt class="docutils literal"><span class="pre">glog</span></tt> as a required
dependency. Turn this <tt class="docutils literal"><span class="pre">ON</span></tt> to use this minimal <tt class="docutils literal"><span class="pre">glog</span></tt>
implementation.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">SCHUR_SPECIALIZATIONS</span> <span class="pre">[Default:</span> <span class="pre">ON]</span></tt>: If you are concerned about
binary size/compilation time over some small (10-20%) performance
gains in the <tt class="docutils literal"><span class="pre">SPARSE_SCHUR</span></tt> solver, you can disable some of the
template specializations by turning this <tt class="docutils literal"><span class="pre">OFF</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">OPENMP</span> <span class="pre">[Default:</span> <span class="pre">ON]</span></tt>: On certain platforms like Android,
multi-threading with <tt class="docutils literal"><span class="pre">OpenMP</span></tt> is not supported. Turn this <tt class="docutils literal"><span class="pre">OFF</span></tt>
to disable multi-threading.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">BUILD_SHARED_LIBS</span> <span class="pre">[Default:</span> <span class="pre">OFF]</span></tt>: By default Ceres is built as
a static library, turn this <tt class="docutils literal"><span class="pre">ON</span></tt> to instead build Ceres as a
shared library.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">BUILD_DOCUMENTATION</span> <span class="pre">[Default:</span> <span class="pre">OFF]</span></tt>: Use this to enable building
the documentation, requires <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> and the
<a class="reference external" href="https://pypi.python.org/pypi/sphinx_rtd_theme">sphinx_rtd_theme</a>
package available from the Python package index. In addition,
<tt class="docutils literal"><span class="pre">make</span> <span class="pre">ceres_docs</span></tt> can be used to build only the documentation.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">MSVC_USE_STATIC_CRT</span> <span class="pre">[Default:</span> <span class="pre">OFF]</span></tt> <em>Windows Only</em>: By default
Ceres will use the Visual Studio default, <em>shared</em> C-Run Time (CRT) library.
Turn this <tt class="docutils literal"><span class="pre">ON</span></tt> to use the <em>static</em> C-Run Time library instead.</p>
</li>
</ol>
</div>
<div class="section" id="options-controlling-ceres-dependency-locations">
<h3>Options controlling Ceres dependency locations<a class="headerlink" href="#options-controlling-ceres-dependency-locations" title="Permalink to this headline">¶</a></h3>
<p>Ceres uses the <tt class="docutils literal"><span class="pre">CMake</span></tt>
<a class="reference external" href="http://www.cmake.org/cmake/help/v2.8.12/cmake.html#command:find_package">find_package</a>
function to find all of its dependencies using
<tt class="docutils literal"><span class="pre">Find&lt;DEPENDENCY_NAME&gt;.cmake</span></tt> scripts which are either included in Ceres
(for most dependencies) or are shipped as standard with <tt class="docutils literal"><span class="pre">CMake</span></tt>
(for <tt class="docutils literal"><span class="pre">LAPACK</span></tt> &amp; <tt class="docutils literal"><span class="pre">BLAS</span></tt>).  These scripts will search all of the &#8220;standard&#8221;
install locations for various OSs for each dependency.  However, particularly
for Windows, they may fail to find the library, in this case you will have to
manually specify its installed location.  The <tt class="docutils literal"><span class="pre">Find&lt;DEPENDENCY_NAME&gt;.cmake</span></tt>
scripts shipped with Ceres support two ways for you to do this:</p>
<ol class="arabic">
<li><p class="first">Set the <em>hints</em> variables specifying the <em>directories</em> to search in
preference, but in addition, to the search directories in the
<tt class="docutils literal"><span class="pre">Find&lt;DEPENDENCY_NAME&gt;.cmake</span></tt> script:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&lt;DEPENDENCY_NAME</span> <span class="pre">(CAPS)&gt;_INCLUDE_DIR_HINTS</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;DEPENDENCY_NAME</span> <span class="pre">(CAPS)&gt;_LIBRARY_DIR_HINTS</span></tt></li>
</ul>
<p>These variables should be set via <tt class="docutils literal"><span class="pre">-D&lt;VAR&gt;=&lt;VALUE&gt;</span></tt>
<tt class="docutils literal"><span class="pre">CMake</span></tt> arguments as they are not visible in the GUI.</p>
</li>
<li><p class="first">Set the variables specifying the <em>explicit</em> include directory
and library file to use:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&lt;DEPENDENCY_NAME</span> <span class="pre">(CAPS)&gt;_INCLUDE_DIR</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;DEPENDENCY_NAME</span> <span class="pre">(CAPS)&gt;_LIBRARY</span></tt></li>
</ul>
<p>This bypasses <em>all</em> searching in the
<tt class="docutils literal"><span class="pre">Find&lt;DEPENDENCY_NAME&gt;.cmake</span></tt> script, but validation is still
performed.</p>
<p>These variables are available to set in the <tt class="docutils literal"><span class="pre">CMake</span></tt> GUI. They
are visible in the <em>Standard View</em> if the library has not been
found (but the current Ceres configuration requires it), but
are always visible in the <em>Advanced View</em>.  They can also be
set directly via <tt class="docutils literal"><span class="pre">-D&lt;VAR&gt;=&lt;VALUE&gt;</span></tt> arguments to <tt class="docutils literal"><span class="pre">CMake</span></tt>.</p>
</li>
</ol>
</div>
<div class="section" id="building-using-custom-blas-lapack-installs">
<h3>Building using custom BLAS &amp; LAPACK installs<a class="headerlink" href="#building-using-custom-blas-lapack-installs" title="Permalink to this headline">¶</a></h3>
<p>If the standard find package scripts for <tt class="docutils literal"><span class="pre">BLAS</span></tt> &amp; <tt class="docutils literal"><span class="pre">LAPACK</span></tt> which ship with
<tt class="docutils literal"><span class="pre">CMake</span></tt> fail to find the desired libraries on your system, try setting
<tt class="docutils literal"><span class="pre">CMAKE_LIBRARY_PATH</span></tt> to the path(s) to the directories containing the
<tt class="docutils literal"><span class="pre">BLAS</span></tt> &amp; <tt class="docutils literal"><span class="pre">LAPACK</span></tt> libraries when invoking <tt class="docutils literal"><span class="pre">CMake</span></tt> to build Ceres via
<tt class="docutils literal"><span class="pre">-D&lt;VAR&gt;=&lt;VALUE&gt;</span></tt>.  This should result in the libraries being found for any
common variant of each.</p>
<p>If you are building on an exotic system, or setting <tt class="docutils literal"><span class="pre">CMAKE_LIBRARY_PATH</span></tt>
does not work, or is not appropriate for some other reason, one option would be
to write your own custom versions of <tt class="docutils literal"><span class="pre">FindBLAS.cmake</span></tt> &amp;
<tt class="docutils literal"><span class="pre">FindLAPACK.cmake</span></tt> specific to your environment.  In this case you must set
<tt class="docutils literal"><span class="pre">CMAKE_MODULE_PATH</span></tt> to the directory containing these custom scripts when
invoking <tt class="docutils literal"><span class="pre">CMake</span></tt> to build Ceres and they will be used in preference to the
default versions.  However, in order for this to work, your scripts must provide
the full set of variables provided by the default scripts.  Also, if you are
building Ceres with <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt>, the versions of <tt class="docutils literal"><span class="pre">BLAS</span></tt> &amp; <tt class="docutils literal"><span class="pre">LAPACK</span></tt>
used by <tt class="docutils literal"><span class="pre">SuiteSparse</span></tt> and Ceres should be the same.</p>
</div>
</div>
<div class="section" id="using-ceres-with-cmake">
<span id="section-using-ceres"></span><h2>Using Ceres with CMake<a class="headerlink" href="#using-ceres-with-cmake" title="Permalink to this headline">¶</a></h2>
<p>Once the library is installed with <tt class="docutils literal"><span class="pre">make</span> <span class="pre">install</span></tt>, it is possible to
use CMake with <a class="reference external" href="http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:find_package">FIND_PACKAGE()</a>
in order to compile <strong>user code</strong> against Ceres. For example, for
<a class="reference external" href="https://ceres-solver.googlesource.com/ceres-solver/+/master/examples/helloworld.cc">examples/helloworld.cc</a>
the following CMakeList.txt can be used:</p>
<div class="highlight-cmake"><div class="highlight"><pre><span class="nb">CMAKE_MINIMUM_REQUIRED</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.8</span><span class="p">)</span>

<span class="nb">PROJECT</span><span class="p">(</span><span class="s">helloworld</span><span class="p">)</span>

<span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Ceres</span> <span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">INCLUDE_DIRECTORIES</span><span class="p">(</span><span class="o">${</span><span class="nv">CERES_INCLUDE_DIRS</span><span class="o">}</span><span class="p">)</span>

<span class="c"># helloworld</span>
<span class="nb">ADD_EXECUTABLE</span><span class="p">(</span><span class="s">helloworld</span> <span class="s">helloworld.cc</span><span class="p">)</span>
<span class="nb">TARGET_LINK_LIBRARIES</span><span class="p">(</span><span class="s">helloworld</span> <span class="o">${</span><span class="nv">CERES_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="specify-ceres-version">
<h3>Specify Ceres version<a class="headerlink" href="#specify-ceres-version" title="Permalink to this headline">¶</a></h3>
<p>Additionally, when CMake has found Ceres it can check the package
version, if it has been specified in the <a class="reference external" href="http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:find_package">FIND_PACKAGE()</a>
call.  For example:</p>
<div class="highlight-cmake"><div class="highlight"><pre><span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Ceres</span> <span class="s">1.2.3</span> <span class="s">REQUIRED</span><span class="p">)</span>
</pre></div>
</div>
<p>The version is an optional argument.</p>
</div>
<div class="section" id="local-installations">
<h3>Local installations<a class="headerlink" href="#local-installations" title="Permalink to this headline">¶</a></h3>
<p>If Ceres was installed in a non-standard path by specifying
-DCMAKE_INSTALL_PREFIX=&#8221;/some/where/local&#8221;, then the user should add
the <strong>PATHS</strong> option to the <tt class="docutils literal"><span class="pre">FIND_PACKAGE()</span></tt> command, e.g.,</p>
<div class="highlight-cmake"><div class="highlight"><pre><span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Ceres</span> <span class="s">REQUIRED</span> <span class="s">PATHS</span> <span class="s2">&quot;/some/where/local/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this can be used to have multiple versions of Ceres
installed.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Tutorial"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="features.html" class="btn btn-neutral" title="Features"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 Google Inc.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
      MathJax.Hub.Config({
          "HTML-CSS": {
            availableFonts: ["TeX"]
          }
        });
      </script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-49769510-1', 'ceres-solver.org');
  ga('send', 'pageview');
</script>


</body>
</html>